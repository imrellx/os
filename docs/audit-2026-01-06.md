# ABOUTME: Initial system audit capturing current state before chezmoi migration
# ABOUTME: Documents what exists, what's worth managing, and recommendations

# System Audit - 2026-01-06

## System Overview

| Property | Value |
|----------|-------|
| Model | MacBook Pro (Mac16,5) |
| Chip | Apple M4 Max |
| Memory | 128 GB |
| macOS | 26.2 (Tahoe) |
| Kernel | Darwin 25.2.0 |

---

## Target Languages

Languages of interest (to be supported across all systems):

| Language | Runtime/Tooling | Notes |
|----------|-----------------|-------|
| Python | **UV** (runtime + package manager) | Primary tooling |
| TypeScript | **Bun** (preferred), Node/npm (compat) | Bun primary, npm for legacy packages |
| JavaScript | **Bun** (preferred), Node/npm (compat) | Bun primary, npm for legacy packages |
| Rust | rustup via mise | |
| Go | mise | |
| Swift | Xcode / Swift toolchain | macOS primary |
| Zig | TBD | |

---

## 1. Homebrew

### Summary
- **193 formulae** installed
- **45 casks** installed
- **14 taps** configured

### Health Issues

| Issue | Severity | Action |
|-------|----------|--------|
| Deprecated casks: alacritty, chromium, powershell, syntax-highlight | Medium | Remove (not actively used) |
| Deprecated formula: icu4c@77 | Low | Will be cleaned up automatically |
| Unlinked keg: container | Low | Run `brew link container` |

### Notable Packages

**Development:**
- Languages: node, bun, deno (via Homebrew); python, go, rust (via mise)
- Editors: neovim, helix
- Git tools: gh, lazygit, git-absorb, jj (Jujutsu)
- LSPs: typescript-language-server, rust-analyzer, gopls, lua-language-server

**Python Tooling:**
- **uv** - Runtime and package manager (critical)
- **ruff** - Linter/formatter (via mise)

**AI/LLM CLIs (must be on ALL systems):**
- claude-code (cask)
- codex (cask)
- gemini-cli
- opencode

**CLI Tools:**
- Modern replacements: eza (ls), bat (cat), fd (find), ripgrep (grep), zoxide (cd)
- File managers: yazi, superfile
- Multiplexers: tmux, zellij
- Misc: fzf, starship, mise

**Containers:**
- **OrbStack** (cask) - Docker/container runtime for macOS

**Terminals (casks):**
- ghostty (primary)
- wezterm, iterm2, warp (alternatives)
- alacritty (deprecated, remove)

---

## 2. Shell Environment

### Structure
**XDG-compliant** - All zsh config in `~/.config/zsh/`

```
~/.zshenv              → Redirects to ~/.config/zsh
~/.config/zsh/
├── .zshrc             # Main config
├── .zshenv            # Environment variables, XDG setup
├── .zprofile          # Login shell config
├── aliases.zsh        # Aliases and functions (~300 lines)
├── homebrew.zsh       # Homebrew-specific setup
└── utils/             # Utility scripts
```

### Key Integrations
- **Prompt**: Starship (`~/.config/starship/starship.toml`)
- **Directory jumping**: zoxide (aliased as `cd`)
- **Tool versions**: mise
- **Plugins**: zsh-autosuggestions, zsh-syntax-highlighting (via Homebrew)

### Notable Aliases
- Multiple neovim configs via `NVIM_APPNAME` → **Simplify to LazyVim only**
- `cc` → Claude with permissions skipped
- Comprehensive eza aliases with macOS fallback
- System maintenance: `brewup`, `upall`

### Cleanup Needed
- [x] ~~Remove nvim config aliases for astrovim, adibhanna, cpplain~~ (nvim simplified to single config)
- [ ] Update aliases.zsh to remove old nvim aliases (va, vh, vc, etc.)
- [ ] `aliases copy.zsh` and `titus-bashrc` - backup files, remove
- [ ] Some zsh plugins commented out - decide if needed

---

## 3. Development Tools

### Python Ecosystem
**UV is the primary runtime and package manager.**

```bash
uv run          # Run Python scripts
uv pip          # Package management
uv venv         # Virtual environments
uvx             # Run tools (like npx for Python)
```

Ruff for linting/formatting (via mise or uvx).

### Runtime Management
**mise** (globally configured in `~/.config/mise/config.toml`):

| Tool | Version | Notes |
|------|---------|-------|
| go | 1.25.4 | latest |
| python | 3.13.9 | Pinned to 3.13, UV handles packages |
| rust | 1.91.1 | Via rustup |
| jq | 1.8.1 | latest |
| julia | 1.12.1 | latest |
| ruff | 0.14.5 | Python linter |
| usage | 2.8.0 | mise plugin |

**Homebrew-managed (JS/TS ecosystem):**
- **bun** 1.3.5 - Primary runtime and package manager
- **node** 25.2.1 - Required for compatibility (many packages still need npm)
- deno 2.6.4 - Alternative runtime

### mise Tasks
Custom tasks defined for:
- LLM operations (bundle generation, README gen, code review)
- Python development (format, lint, test with uv/ruff)
- Jupyter, WebUI

### Decisions Needed
- [ ] Consider managing node/bun/deno via mise for consistency
- [ ] Add Swift toolchain management strategy
- [ ] Add Zig to mise config

---

## 4. Git Configuration

### Setup
```
User: Ivelin Nikolov <imrellx@gmail.com>
GitHub: ivn
Default branch: main
```

### Features
- **SSH signing** enabled (id_rsa.pub)
- **Delta** as pager (side-by-side diffs)
- **Commit template** at `~/.gitmessage`
- **Git LFS** configured

### SSH Keys
- `~/.ssh/id_rsa.pub` - Main signing key
- `~/.ssh/avd-test-key.pub` - Test key

### To Migrate
- [ ] `~/.gitconfig` → chezmoi
- [ ] `~/.gitmessage` → chezmoi

---

## 5. Dotfiles / ~/.config

### High-Priority (migrate to chezmoi)

| Directory | Purpose | Notes |
|-----------|---------|-------|
| zsh/ | Shell config | XDG-compliant, clean |
| starship/ | Prompt | Cross-platform |
| ghostty/ | Primary terminal | |
| nvim/ | Primary editor (LazyVim) | ✅ Simplified to single config |
| git/ | Git config | |
| mise/ | Tool versions | Global config |
| tmux/ | Multiplexer | |
| lazygit/ | Git UI | |
| hyprspace/ | **Window manager** | Aerospace fork, heavily used |
| fonts/ | **Custom fonts** | Must deploy to other systems |

### Medium Priority

| Directory | Purpose | Notes |
|-----------|---------|-------|
| wezterm/ | Alt terminal | Keep for Linux |
| yazi/ | File manager | |
| zellij/ | Alt multiplexer | |
| borders/ | Window borders | macOS only |

### Skip / App-Managed

| Directory | Reason |
|-----------|--------|
| cursor/ | App syncs config |
| raycast/ | **Critical app**, but syncs via login |
| iterm2/ | App-managed |
| configstore/ | npm-managed |
| op/ | 1Password-managed |

### Cleanup - Remove These

| Directory | Reason | Status |
|-----------|--------|--------|
| nvim-adibhanna/ | Not used | ✅ Removed |
| nvim-astrovim/ | Not used | ✅ Removed |
| nvim-cpplain/ | Not used | ✅ Removed |
| alacritty/ | Deprecated cask | Pending |
| aerospace/ | Using Hyperspace instead | Pending |

---

## 6. Applications

### Critical Applications

| App | Purpose | Install Method | Config Sync |
|-----|---------|----------------|-------------|
| **Raycast** | Launcher, productivity | Cask | Via login (cloud) |
| **Obsidian** | Knowledge management | Cask | Via vault (iCloud/sync) |
| **VoiceInk** | Voice to text | Cask | TBD |
| **OrbStack** | Docker/containers | Cask | Config in ~/.orbstack |
| **Ghostty** | Terminal | Cask | ~/.config/ghostty |

### AI/LLM Tools (must-haves)

| Tool | Type | Notes |
|------|------|-------|
| Claude.app | GUI | Cask |
| claude-code | CLI | Cask |
| Codex | CLI | Cask |
| gemini-cli | CLI | Homebrew |
| opencode | CLI | Homebrew |
| Cursor | IDE | Cask |

### Other Used Apps

**Terminals:** Ghostty (primary), WezTerm, Warp
**Editors/IDEs:** VS Code, Cursor, Zed, Xcode
**Browsers:** Arc (primary), Chrome, Zen
**Communication:** Telegram, WhatsApp, Discord, Teams
**Productivity:** Linear, Drafts, iA Writer
**Dev Tools:** OrbStack, GitHub Desktop, UTM

### Count
- **102 applications** total
- Many are Homebrew cask-managed
- Some cruft to clean up

### Cleanup
- [ ] Remove Chromium (deprecated)
- [ ] Remove `log_iotc.txt` stray file
- [ ] Audit unused apps

---

## 7. Fonts

**Custom fonts in `~/.config/fonts/` must be deployed to other systems.**

Current fonts (Homebrew casks):
- font-blex-mono-nerd-font
- font-ia-writer-mono
- font-symbols-only-nerd-font

Strategy:
- [ ] Inventory what's in ~/.config/fonts/ vs what's cask-installed
- [ ] Add font installation to bootstrap script
- [ ] Consider copying custom fonts to chezmoi for cross-platform

---

## 8. Window Management

**Hyperspace** (aerospace fork) is the primary window manager.

Config location: `~/.config/hyprspace/`

Note: aerospace config exists but Hyperspace is what's actually used.

---

## 9. macOS Settings

### Current State
- Finder: PathBar enabled, StatusBar enabled
- Other settings: Not fully audited

### Recommendations
- [ ] Create `defaults.sh` script capturing preferred settings
- [ ] Low priority - focus on dotfiles first

---

## Migration Priority (Revised)

### Phase 1: Core
1. ✅ Generate Brewfile from current state
2. Initialize chezmoi
3. Migrate zsh config
4. Migrate starship config
5. Migrate git config + gitmessage
6. Migrate mise config

### Phase 2: Editor, Terminal, Window Manager
7. Migrate ghostty config
8. Migrate nvim-lazyvim config (+ remove other nvim configs)
9. Migrate tmux config
10. Migrate lazygit config
11. Migrate hyprspace config

### Phase 3: Fonts & Remaining
12. Font deployment strategy
13. Migrate remaining configs (yazi, zellij, borders, etc.)
14. Create bootstrap script
15. Document macOS defaults

---

## Action Items

### Immediate
- [x] Run `brew bundle dump` to create Brewfile
- [ ] Fix Homebrew issues (deprecated packages, unlinked kegs)
- [ ] Initialize chezmoi and add first configs
- [x] ~~Clean up unused nvim configs~~ (done - single nvim/ now)

### Soon
- [ ] Clean up backup files in ~/.config/zsh/
- [ ] Audit ~/.config/fonts/ contents
- [ ] Add Zig to mise config
- [ ] Verify all AI CLIs are in Brewfile

### Later
- [ ] macOS defaults script
- [ ] Full bootstrap automation
- [ ] Test on Linux VM (Omakub)
