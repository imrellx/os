#  ~/.config/zsh/.zshenv
# Core envionmental variables
# Locations configured here are requred for all other files to be correctly imported

# XDG Base Directory Specification (https://specifications.freedesktop.org/basedir-spec/basedir-spec-latest.html)
export XDG_CONFIG_HOME="${HOME}/.config"
export XDG_DATA_HOME="${HOME}/.local/share"
export XDG_BIN_HOME="${HOME}/.local/bin"
export XDG_LIB_HOME="${HOME}/.local/lib"
export XDG_CACHE_HOME="${HOME}/.cache"
export XDG_STATE_HOME="$HOME/.local/state"
export XDG_RUNTIME_DIR="$HOME/.local/runtime" # macOS does not have session lifetime directories; alt: `~/Library/Caches`

#export PATH="~/.local/bin:$PATH"
export PATH="$HOME/.local/bin:$PATH"

# Set default applications
export EDITOR="vl"
export VISUAL="code"
export TERMINAL="ghostty"
# export BROWSER="zen-browser"
#export PAGER="less"

# Respect XDG directories
export ZDOTDIR="${XDG_CONFIG_HOME}/zsh"
export ZELLIJ_CONFIG_DIR="${XDG_CONFIG_HOME}/zellij"

# Encodings, languges and misc settings
#export LANG='en_GB.UTF-8';
export PYTHONIOENCODING='UTF-8';
#export LC_ALL='C';

export LANG=en_GB.UTF-8
export LC_ALL=en_GB.UTF-8
export LC_CTYPE=en_GB.UTF-8
export LC_MESSAGES=en_GB.UTF-8


# Hide computer name in terminal
export DEFAULT_USER="$(whoami)"

# Secrets
[ -f "$HOME/.env" ] && source "$HOME/.env"

# PANDOC
# does not have an environment var for this, so using `--data-dir` alias
alias pandoc='pandoc --data-dir="$HOME/.config/pandoc"'

# Specify the history file and its sizes
setopt HIST_IGNORE_DUPS
setopt HIST_REDUCE_BLANKS
setopt INC_APPEND_HISTORY # write immediately to history file
setopt HIST_NO_STORE      # ignore history command itself for the history
setopt HIST_IGNORE_SPACE  # cmds with leading space are not added to the history

export HISTFILE=~/.config/zsh/.zsh_history
export HISTSIZE=20000
export SAVEHIST=$HISTSIZE
# don't save in `$ZDOTDIR` as it's in my public dotfile repo
# export HISTFILE="$HOME/Library/Mobile Documents/com~apple~CloudDocs/Dotfolder/zsh_history.zsh" #but mine isn't

# Beads related *Important:** Daemon mode does NOT work correctly with `git worktree`. 
# Git worktrees share the same `.git` directory and `.beads` database. The daemon may commit changes to the wrong branch.
# Solutions
# export BEADS_NO_DAEMON=1
